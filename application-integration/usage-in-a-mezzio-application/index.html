<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Normalize and validate input sets from the web, APIs, the CLI, and more, including files.">  
    <link rel="canonical" href="https://docs.laminas.dev/laminas-inputfilter/application-integration/usage-in-a-mezzio-application/">
    <link rel="shortcut icon" href="https://docs.laminas.dev/img/trademark-laminas-foundation-rgb.svg">

    <title>Usage in a mezzio application - laminas-inputfilter - Laminas Docs</title>

    <link rel="stylesheet" href="https://docs.laminas.dev/css/styles.css">
    
</head>
<body id="page-top" class="components" data-spy="scroll" data-target=".toc" data-offset="20">

    
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <div class="container">
        
        <a class="logo-link navbar-brand" href="https://getlaminas.org/" data-tooltip data-placement="bottom" title="Go to the Laminas homepage">
            <img src="https://docs.laminas.dev/img/laminas-foundation-white.svg" height="28" alt="Laminas">
        </a>
        <a class="navbar-title" href="https://docs.laminas.dev/" data-tooltip data-placement="bottom" title="Go to the Laminas Documentation">
            Documentation
        </a>

        
        <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">

            
            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                    <div class="dropdown">
                        <a class="dropdown-toggle nav-link" data-toggle="dropdown" aria-expanded="false">
                            All Docs
                        </a>
                        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                            <a class="dropdown-item" href="https://docs.laminas.dev/components">Components</a>
                            <a class="dropdown-item" href="https://docs.mezzio.dev/">Mezzio</a>
                            <a class="dropdown-item" href="https://api-tools.getlaminas.org/">API Tools</a>
                            <a class="dropdown-item" href="https://docs.laminas.dev/mvc">MVC</a>
                        </div>
                    </div>
                </li>
                <li class="nav-item">
                    <a href="https://getlaminas.org/participate" class="nav-link">Community</a>
                </li>
            </ul>

            
            
                <div class="d-block d-sm-none">
                    
    <div class="subnavigation hidden-print">
        <h4 class="subnavigation__title">
            <a href="../..">laminas-inputfilter</a>
        </h4>

        <h5 class="subnavigation__subtitle">Table of Contents</h5>

        <ul class="subnavigation__list">
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item ">
                                <a href="../../intro/" class="subnavigation__link">Introduction</a>
                            </li>
                        
                    
                
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item">
                                <span class="subnavigation__headline">Reference</span>
                                <ul class="subnavigation__list">
                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../../specs/" class="subnavigation__link">Specifications</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../../file-input/" class="subnavigation__link">File Upload Input</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../../optional-input-filters/" class="subnavigation__link">Optional Input Filters</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../../unfiltered-data/" class="subnavigation__link">Unfiltered Data</a>
    </li>

                                    
                                </ul>
                            </li>
                        
                    
                
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item">
                                <span class="subnavigation__headline">Application Integration</span>
                                <ul class="subnavigation__list">
                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../usage-in-a-laminas-mvc-application/" class="subnavigation__link">Usage in a laminas-mvc application</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item subnavigation__list-item--active">
        <a href="./" class="subnavigation__link">Usage in a mezzio application</a>
    </li>

                                    
                                </ul>
                            </li>
                        
                    
                
            
        </ul>
    </div>

                </div>
            

            
            <div class="d-block d-sm-none">
                <div class="component-selector">
    
    <h5 class="component-selector__subtitle">Find documentation…</h5>
    <select class="form-control component-selector__control">
        <option value="/">Overview</option>
        <optgroup label="Components"></optgroup>
    </select>
</div>
            </div>
        </div>
    </div>
</nav>

    
    <header class="header">
    <div class="container">
        <div class="row">

            
            <div class="col-8">
                <h1 class="header__title">
                    Components

                    
                        <small class="header__subtitle">laminas-inputfilter</small>
                    
                </h1>
            </div>

            
            <div class="col-4 text-sm-right">
                
                    

                    <a href="#" class="header__link header__link--search" data-toggle="modal" data-target="#mkdocs_search_modal" title="Open search">
                        <i class="fa fa-search"></i> Search
                    </a>
                    <a href="https://github.com/laminas/laminas-inputfilter/" class="header__link header__link--github" title="Go to repository of laminas-inputfilter">
                        <i class="fa fa-github"></i> GitHub
                    </a>
                
            </div>
        </div>
    </div>
</header>

    
    <div class="container">
        <div class="row">
            <div class="col-md-9 col-sm-12 content" role="main">
                
                
                    
    

    
    
        <div class="toc">
            <h6 class="toc__headline">On this page</h6>
            <ul class="toc__list">
                
                    <li class="toc__entry">
                        <a href="#create-input-filter" class="toc__link nav-link">Create Input Filter</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#using-input-filter" class="toc__link nav-link">Using Input Filter</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#register-input-filter-and-handler" class="toc__link nav-link">Register Input Filter and Handler</a>
                    </li>
                
            </ul>
        </div>
    

                

                
                    <nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        
            <li class="breadcrumb-item"><a href="https://docs.laminas.dev/">Overview</a></li>
            <li class="breadcrumb-item"><a href="https://docs.laminas.dev/components/">Components</a></li>

            
                <li class="breadcrumb-item"><a href="../..">laminas-inputfilter</a></li>

                
                    
                        
                        
                            <li class="breadcrumb-item">Application Integration</li>
                        
                    
                

                <li class="breadcrumb-item active" aria-current="page">Usage in a mezzio application</li>
            
        
    </ol>
</nav>






    
    
        <h2 class="chapter__headline">Application Integration</h2>
    

    <h1 id="usage-in-a-mezzio-application">Usage in a mezzio Application</h1>
<p>The following example shows <em>one</em> potential use case of laminas-inputfilter within
a mezzio based application. The example uses a module, config provider
configuration, laminas-servicemanager as dependency injection container, the
laminas-inputfilter plugin manager and a request handler.</p>
<p>Before starting, make sure laminas-inputfilter is installed and configured.</p>
<h2 id="create-input-filter">Create Input Filter</h2>
<p>Create an input filter as separate class, e.g.
<code>src/Album/InputFilter/QueryInputFilter.php</code>:</p>
<pre class=codehilite><code class=language-php>namespace Album\InputFilter;

use Laminas\Filter\ToInt;
use Laminas\I18n\Validator\IsInt;
use Laminas\InputFilter\InputFilter;

class QueryInputFilter extends InputFilter
{
    public function init()
    {
        // Page
        $this-&gt;add(
            [
                'name'              =&gt; 'page',
                'allow_empty'       =&gt; true,
                'validators'        =&gt; [
                    [
                        'name' =&gt; IsInt::class,                        
                    ],                    
                ],
                'filters'           =&gt; [
                    [
                        'name' =&gt; ToInt::class,
                    ],
                ],
                'fallback_value'    =&gt; 1,
            ]
        );

        // …
    }
}</code></pre>
<h2 id="using-input-filter">Using Input Filter</h2>
<h3>Create Handler</h3>
<p>Using the input filter in a request handler, e.g.
<code>src/Album/Handler/ListHandler.php</code>:</p>
<pre class=codehilite><code class=language-php>namespace Album\Handler;

use Album\InputFilter\QueryInputFilter;
use Psr\Http\Message\ServerRequestInterface;
use Psr\Http\Server\RequestHandlerInterface;
use Psr\Http\Message\ResponseInterface;
use Laminas\InputFilter\InputFilterInterface;
use Mezzio\Template\TemplateRendererInterface;

class ListHandler implements RequestHandlerInterface
{
    /** @var InputFilterInterface */
    private $inputFilter;

    /** @var TemplateRendererInterface */
    private $renderer;

    public function __construct(
        InputFilterInterface $inputFilter,
        TemplateRendererInterface $renderer
    ) {
        $this-&gt;inputFilter = $inputFilter;
        $this-&gt;renderer    = $renderer;
    }

    public function handle(ServerRequestInterface $request) : ResponseInterface
    {
        $this-&gt;inputFilter-&gt;setData($request-&gt;getQueryParams());
        $this-&gt;inputFilter-&gt;isValid();
        $filteredParams = $this-&gt;inputFilter-&gt;getValues();

        // …

        return new HtmlResponse($this-&gt;renderer-&gt;render(
            'album::list',
            []
        ));
    }
}</code></pre>
<h3>Create Factory for Handler</h3>
<p>Fetch the <code>QueryInputFilter</code> from the input filter plugin manager in a factory,
e.g. <code>src/Album/Handler/ListHandlerFactory.php</code>:</p>
<pre class=codehilite><code class=language-php>namespace Album\Handler;

use Album\InputFilter\QueryInputFilter;
use Psr\Container\ContainerInterface;
use Laminas\InputFilter\InputFilterPluginManager;

class ListHandlerFactory
{
    public function __invoke(ContainerInterface $container)
    {
        /** @var InputFilterPluginManager $pluginManager */
        $pluginManager = $container-&gt;get(InputFilterPluginManager::class);
        $inputFilter   = $pluginManager-&gt;get(QueryInputFilter::class);

        return new ListHandler(
            $inputFilter,
            $container-&gt;get(TemplateRendererInterface::class)
        );
    }
}</code></pre>
<blockquote>
<h3>Instantiating the InputFilter</h3>
<p>The <code>InputFilterPluginManager</code> is used instead of directly instantiating the
input filter to ensure to get the filter and validator plugin managers
injected. This allows usage of any filters and validators registered with
their respective plugin managers.</p>
<p>Additionally the <code>InputFilterPluginManager</code> calls the <code>init</code> method <em>after</em>
instantiating the input filter, ensuring all dependencies are fully injected
first.</p>
</blockquote>
<h2 id="register-input-filter-and-handler">Register Input Filter and Handler</h2>
<p>Extend the configuration provider of the module to register the input filter and
the request handler, e.g. <code>src/Album/ConfigProvider.php</code>:</p>
<pre class=codehilite><code class=language-php>namespace Album;

class ConfigProvider
{
    public function __invoke() : array
    {
        return [
            'dependencies'  =&gt; $this-&gt;getDependencies(),
            'input_filters' =&gt; $this-&gt;getInputFilters(), // &lt;-- Add this line
        ];
    }

    public function getDependencies() : array
    {
        return [
            'factories' =&gt; [
                Handler\ListHandler::class =&gt; Handler\ListHandlerFactory::class, // &lt;-- Add this line
                // …
            ],
        ];
    }

    // Add the following method
    public function getInputFilters() : array
    {
        return [
            'factories' =&gt; [
                InputFilter\QueryInputFilter::class =&gt; InvokableFactory::class,
            ],
        ];
    }

    // …
}</code></pre>




    <nav>
    <ul class="page-nav hidden-print">

        
        <li class="page-nav__item">
            
                <a rel="prev" class="page-nav__link page-nav__link--prev" href="../usage-in-a-laminas-mvc-application/">
                    <i class="fa fa-chevron-left"></i> Previous
                </a>
            
        </li>

        
        <li class="page-nav__item">
            
        </li>
    </ul>
</nav>




    <div class="help-wanted">
        <p>
            Found a mistake or want to contribute to the documentation?
            <a href="https://github.com/laminas/laminas-inputfilter/edit/master/docs/book/application-integration/usage-in-a-mezzio-application.md" target="_blank" class="help-wanted__link">
                Edit this page on GitHub!
            </a>
        </p>
    </div>

                
            </div>
            <div class="col-md-3 col-sm-12 sidebar">
                
                    <div class="component-selector">
    
    <h5 class="component-selector__subtitle">Find documentation…</h5>
    <select class="form-control component-selector__control">
        <option value="/">Overview</option>
        <optgroup label="Components"></optgroup>
    </select>
</div>
                    
    <div class="subnavigation hidden-print">
        <h4 class="subnavigation__title">
            <a href="../..">laminas-inputfilter</a>
        </h4>

        <h5 class="subnavigation__subtitle">Table of Contents</h5>

        <ul class="subnavigation__list">
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item ">
                                <a href="../../intro/" class="subnavigation__link">Introduction</a>
                            </li>
                        
                    
                
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item">
                                <span class="subnavigation__headline">Reference</span>
                                <ul class="subnavigation__list">
                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../../specs/" class="subnavigation__link">Specifications</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../../file-input/" class="subnavigation__link">File Upload Input</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../../optional-input-filters/" class="subnavigation__link">Optional Input Filters</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../../unfiltered-data/" class="subnavigation__link">Unfiltered Data</a>
    </li>

                                    
                                </ul>
                            </li>
                        
                    
                
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item">
                                <span class="subnavigation__headline">Application Integration</span>
                                <ul class="subnavigation__list">
                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../usage-in-a-laminas-mvc-application/" class="subnavigation__link">Usage in a laminas-mvc application</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item subnavigation__list-item--active">
        <a href="./" class="subnavigation__link">Usage in a mezzio application</a>
    </li>

                                    
                                </ul>
                            </li>
                        
                    
                
            
        </ul>
    </div>

                
            </div>
        </div>
    </div>

    
    <footer class="footer">
    <div class="container">

        
        <div class="row">
            <div class="col-md-12 text-center">
                <a class="footer__button" href="#page-top"><i class="fa fa-chevron-up" aria-hidden="true"></i></a>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
                <h5>Laminas</h5>
                <ul>
                    <li>Laminas Project <a href="https://getlaminas.org/">The new foundation for the community-supported, open source continuation of Zend Framework</a></li>
                    <li>Laminas Components and MVC <a href="https://docs.laminas.dev/">Components and MVC for enterprise applications</a></li>
                    <li>Mezzio <a href="https://docs.mezzio.dev/">PSR-15 middleware in minutes</a></li>
                    <li>Laminas API Tools <a href="https://api-tools.getlaminas.org/">Build RESTful APIs in minutes</a></li>
                </ul>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
                <div class="row">

                    
                    <div class="col-md-4">
                        <h4 class="footer__headline">Support</h4>
                        <ul class="support__list">
                            <li class="support__list-item">
                                <a href="https://discourse.laminas.dev" class="support__link" title="Forum"><i class="fa fa-comments"></i></a>
                            </li>
                            <li class="support__list-item">
                                <a href="https://laminas.dev/chat" class="support__link" title="Chat"><i class="fa fa-slack"></i></a>
                            </li>
                            <li class="support__list-item">
                                <a href="https://github.com/laminas" class="support__link" title="Github"><i class="fa fa-github"></i></a>
                            </li>
                            <li class="support__list-item">
                                <a href="https://twitter.com/getlaminas" class="support__link" title="Twitter"><i class="fa fa-twitter"></i></a>
                            </li>
                            <li class="support__list-item">
                                <a href="https://getlaminas.org/blog/feed-rss.xml" class="support__link" title="Blog feed"><i class="fa fa-rss"></i></a>
                            </li>
                            <li class="support__list-item">
                                <a href="https://getlaminas.org/security/feed" class="support__link" title="Security feed"><i class="fa fa-rss-square"></i></a>
                            </li>
                        </ul>
                    </div>

                    
                    <div class="col-md-4">
                        <h4 class="footer__headline">License</h4>
                        <p>
                            Code licensed under <a
                                href="https://github.com/laminas/laminas-inputfilter/blob/master/LICENSE.md">BSD 3-Clause</a>.
                        </p>
                    </div>

                    
                    <div class="col-md-4">
                        <h4 class="footer__headline">Copyright</h4>
                        <p>
                            <!--Built with love by the Laminas team with the help of our
                            <a href="https://github.com/laminas/laminas-inputfilter/graphs/contributors">contributors</a>.<br>-->
                            &copy; 2019-2020 by <a href="https://getlaminas.org/">The Laminas Project</a>.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</footer>

    <script>
        let base_url = '../..',
            project  = "components",
            siteName = 'laminas-inputfilter';
    </script>
    <script src="https://docs.laminas.dev/js/scripts.js"></script>
    
        <script src="../../search/main.js"></script>
    

    
    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Search</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                    <span class="sr-only">Close</span>
                </button>
            </div>
            <div class="modal-body">
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search in laminas-inputfilter" id="mkdocs-search-query">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
        </div>
    </div>
</div>
</body>


</html>
